# 10/8(금) 18:34

- Name exports 방식
export default name;을 사용했을땐
import name from "디렉토리위치";
=> 한 개의 파일에서 여러 컴포넌트 export가능
=> import시, 이름이 같아야함

- Default exports 방식
export default name;을 사용했을땐
import name from "디렉토리위치";
=> 한 개의 파일에서 한 컴포넌트만 export가능
=> import시, 이름이 같을 필요 x

https://colinricardo.substack.com/p/named-export-vs-default-export

# 10/17(일) 19:33

- 가상환경 접속할 때 까먹을까봐 적어놓는다.
conda env list   :   가상환경 목록
conda create -n 가상환경이름 python==3.7   :  파이썬 3.7버전인 가상환경 생성
conda activate 가상환경이름   :   선택한 가상환경 열기

pip install jupyter notebook
jupyter notebook

# 10/17(일) 19:49

- VSC 터미널에서 가상환경(two)접속 후 파이썬실행결과와 일반터미널에서의 결과가 다르다;; 왜지?
- 두 환경에서 각각 파이썬 버전을 비교해서보니 다른 결과가 나온다;; VSC에서 가상환경접속에 문제아 있는듯..?
- 애초에 왜 React에서 socketio서버를 못쓰게 하는걸까...

# 10/20(수) 20:06

깃에다가 push를 하는데 PythonScript가 서브모듈처리되어 업로드되었다.
git안에서 git을 보내면 이런일이 발생하는데 서브모듈의 .git만 지운다고 처리되는게 아닌가보다.
- git rm --cached ./PythonScript

# 10/20(수) 23:45

파이썬에서 1 모션을 인식할때마다 소켓통신으로 리액트에 "1"을 전송한다.
리액트에서는 소켓통신 메시지가 도착할때마다 console.log와 state증가 2가지를 수행하는데

- console.log가 한번에 4~6개씩 찍힌다
- state는 0부터 1씩 증가해야하는데 다시 감소하더니 늘어난다
- 이게 무슨말이냐면 콘솔로그가 다양한 곳에서 찍히고있다는뜻...?
- state가 11이상 누적되면 브라우저 콘솔에서 무한루프가 돌며 혼자 미친듯이 콘솔로그가 찍힌다 1모션을 인식하지 않는상태인데도;;

지금 생각해보니, 각 Icon 컴포넌트에서 소켓메시지를 받는 이벤트리스너를 정의했다.
컴포넌트의 개수만큼 콘솔로그가 뻥튀기 되었다는 것이 유추됨.

그런데 이벤트리스너를 메뉴판 컴포넌트에서 정의했는데도 왜 동일한 문제가 발생할까
어디서 다른 이벤트리스너라도 정의되어 있는걸까?

그리고 왜 state는 11 위로는 늘어나지 않는걸까?

https://velog.io/@mong-head/React-Socket-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%A4%91%EB%B3%B5-%ED%98%B8%EC%B6%9C-%EB%B0%A9%EC%A7%80

컴포넌트 안에 이벤트리스너를 등록해두면 안된다.
왜냐면 컴포넌트가 다시 render될때마다 컴포넌트에 이벤트리스너가 추가되어
해당 이벤트가 발생시 지금까지 등록된 모든 이벤트리스너가 동작하게된다.

# 10/21(목) 12:23

음 콘솔로그 뻥튀기를 해결했다. 파이썬에서 보내는 이벤트수와 리액트에서 받는 이벤트수가 동일함을 드디어 확인했다.

그러나 왜인지 state가 증가하지 않는다.
그 이유는 re-render시마다 state가 초기값인 0이 되기 때문이 아닐까.
근데 버튼의 onClick이벤트로 Increment를 실행하는 것과 소켓통신 이벤트로 Increment를 실행하는 것은 무슨차이일까.
왜 하나는 되고 하나는 안될까....음,,,,,

# 10/22(금) 11:42

```javascript
const [one, setOne] = useState(0);
const Increment = () => {
		setOne(one + 1);
		console.log("1이 인식됨. 누적수:", one);
}
```
이벤트리스너로 Increment함수를 콜백으로 지정한 상태.
setOne으로 one의 값을 1늘리고 증가된 값을 콘솔로그로 확인하려 했으나 값이안바뀐상태로 출력됨.
값자체는 바뀌었으나 setOne이 비동기함수이기 때문에 증가하기 전에 콘솔로그가 실행된걸로 추정됨.

https://as-you-say.tistory.com/214
도움이 되는 글을 찾았다.

"useState훅을 사용해서 정의되는 상태값 변경 함수는 비동기 처리로 진행됩니다. 따라서 상태 변경 함수가 한번에 여러번 호출 되더라도 1만 증가하게 됩니다."

"여러번 호출한값을 얻기 위해서는 상태값 변경 함수에 함수를 입력하는 방법으로 해결할 수 있습니다."

```javascript
setCount(count + 1);	// 기존방법

setCount(v => v+1);		// 새로운방법
```

질문 : 버튼을 클릭하는 예제에서는 왜 비동기 문제가 드러나지 않았던 거지?
=> 버튼을 클릭할때는 사용자가 2번째로 버튼을 클릭하기전에 비동기함수가 동작을 완수하기때문
=> 위 링크에서 답을 발견함.

"onClick 이라는 함수는 button 이라는 리액트 요소에 입력이 되어 있기 때문에, 일괄처리로 실행됩니다. 따라서 상태값 변경 함수가 여러번 호출되더라도 상태값이 변경 될 때마다 렌더링을 하는 것이 아니라 상태값이 다 변경 된 후 함수의 로직이 마무리 되면 그 다음 렌더링이 발생합니다."

질문 : setCount에는 값을 넣어야하는게 아니었나? 왜 함수를 넣을 수 있는거고 어떤원리로
비동기를 동기적으로 만들어준건지 모르겠다.

https://yeoulcoding.tistory.com/169
해당 링크에서 답을 찾았다.

React에서는 Batch Process라는 절차를 통해 state를 관리한다.
state의 값을 변화시키는 비동기처리들을 일일히 따로 처리하는것이 아니라,
일정량을 한번에 묶어서 처리한다.
마지막으로 업데이트된 값으로 state값을 결정하여 묶은 명령들을 한번에 처리해
단 한번만 렌더링하는 것이다.

# 10/22(금) 11:53

드디어 소켓통신으로 리액트앱의 state를 증가시키는 것에 성공!
초당 25회정도의 소켓 메시지를 받아들이는 것 같다.
1. 이제 모션별로 state를 만들어야하고
2. state가 증가될때마다 UI가 조금씩 꺠질랑말랑하는데 요 문제를 해결하고
3. 증가된 state만큼 아이콘에 UI처리를 해줘야 한다.


1. 소켓통신보낼때 str말고 object
{
	motion : 1;
}

2. 컴포넌트구조변경
